{% extends 'base.html' %}
{% load static %}
{% load rupiah %}

{% block title %}
  Pesanan - CoffeeShop
{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/pesanan.css' %}" />
{% endblock %}

{% block content %}
  <div class="pesanan-container">
    <h2 class="text-center mb-4">
      <i class="fas fa-mug-hot me-2"></i> Pesanan Aktif
    </h2>

    {% if orders %}
      <table>
        <thead>
          <tr>
            <th>No</th>
            <th>Nama Produk</th>
            <th>Jumlah</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for order in orders %}
            {% for item in order.items.all %}
              <tr>
                <td data-label="No">{{ forloop.parentloop.counter }}</td>
                <td data-label="Nama Produk">{{ item.menu.nama }}</td>
                <td data-label="Jumlah">{{ item.jumlah }}</td>
                <td data-label="Status">
                  {% if order.status == "diproses" %}
                    <span class="badge rounded-pill px-3 py-2 fw-semibold text-dark bg-warning-subtle border border-warning">
                      ‚è≥ Sedang diproses
                    </span>
                  {% elif order.status == "pick up" %}
                    <span class="badge rounded-pill px-3 py-2 fw-semibold text-primary bg-info-subtle border border-info">
                      üì¶ Siap diambil
                    </span>
                  {% elif order.status == "selesai" %}
                    <span class="badge rounded-pill px-3 py-2 fw-semibold text-success bg-success-subtle border border-success">
                      ‚úÖ Selesai
                    </span>
                  {% else %}
                    <span class="badge rounded-pill px-3 py-2 fw-semibold text-secondary bg-light border border-secondary">
                      ‚è±Ô∏è Menunggu
                    </span>
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-center text-muted">Belum ada pesanan aktif.</p>
    {% endif %}
  </div>
{% endblock %}